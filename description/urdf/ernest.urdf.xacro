<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="ernest">
<xacro:include filename="$(find description)/urdf/materials.xacro"/>

<xacro:macro name="ernest"> 
  <link name="base_link">
  </link>

  <joint name="frame_joint" type="fixed">
    <origin rpy="0 0 ${- pi/2}" xyz="-0.4 0 0.4"/>
    <parent link="base_link"/>
    <child link="chassis"/>
  </joint> 

  <link name="chassis">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 -0.1 0.1"/>
      <mass value="17.31"/>
      <inertia ixx="4.1455" ixy="0.0210" ixz="-0.0053" 
      iyy="1.4858" iyz="-0.6295" izz="5.2302"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/chassis.STL"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/chassis.STL"/>
      </geometry>
    </collision> 
  </link>

  <link name="pivot">
    <inertial>
      <origin rpy="0 0 0" xyz="-5.83048022436035E-08 -0.0363481578557913 -0.0534922287892846"/>
      <mass value="2.82"/>
      <inertia ixx="0.0045" ixy="0.0" ixz="0.0" iyy="0.0044" iyz="0.0" izz="0.0047"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/pivot.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/pivot.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="pivot_joint" type="revolute">
    <limit effort="5.0" lower="-0.8" upper="0.8" velocity="2"/>
    <origin rpy="0 0 3.13911747329568" xyz="0 0.4015 -0.00700000000000001"/>
    <parent link="chassis"/>
    <child link="pivot"/>
    <axis xyz="0 0 -1"/>
  </joint>


  <link name="bogie">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.15 0.05"/>
      <mass value="8.475"/>
      <inertia ixx="0.0454" ixy="0.0" ixz="0.0"
               iyy="1.2486" iyz="0.0012" izz="1.2830"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/bogie.STL"/>
      </geometry>
      <material name="white"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/bogie.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="bogie_joint" type="revolute">
    <limit effort="1000" lower="-1" upper="1" velocity="30"/>
    <origin rpy="1.5707963267949 0.000529942236827729 0" xyz="0 -0.101800622452903 -0.0640000000000083"/>
    <parent link="pivot"/>
    <child link="bogie"/>
    <axis xyz="0 0 1"/>
  </joint>

  <link name="front_left_steer">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.18"/>
      <mass value="3.15"/>
      <inertia ixx="0.0235" ixy="0.0" ixz="0.0034" iyy="0.0311" iyz="-0.0" izz="0.0134"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_left_steer.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_left_steer.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="front_left_steer_joint" type="revolute">
    <limit effort="50" lower="-0.8" upper="0.8" velocity="30"/>
    <origin rpy="-1.5707963267949 0.0208107531087718 0" xyz="0.399593578400315 0.05 0.0507993775470971"/>
    <parent link="bogie"/>
    <child link="front_left_steer"/>
    <axis xyz="0 0 -1"/>
  </joint>

  <link name="front_left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.0103428040717592"/>
      <mass value="2.82"/>
      <inertia ixx="0.0224" ixy="0.0" ixz="-0.0006" 
              iyy="0.0224" iyz="0.0" izz="0.0337"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_left_wheel.STL"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
          <mesh filename="package://description/meshes/front_left_wheel.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="front_left_wheel_joint" type="continuous">
    <origin rpy="1.57079632679491 0.0288958987838113 1.5707963267949" xyz="0 0 -0.214560184613926"/>
    <parent link="front_left_steer"/>
    <child link="front_left_wheel"/>
    <axis xyz="0 0 1"/>
  </joint>
  <link name="front_right_steer">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.18"/>
      <mass value="3.15"/>
      <inertia ixx="0.0331" ixy="0.0" ixz="0.0" iyy="0.0235" iyz="-0.0034" izz="0.0134"/>    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_right_steer.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_right_steer.STL"/>
      </geometry>
    </collision>
  </link>

  <joint name="front_right_steer_joint" type="revolute">
    <limit effort="50" lower="-0.8" upper="0.8" velocity="30"/>
    <origin rpy="-1.57079632679545 -1.56850410535828 0" xyz="-0.399593578400314 0.05 0.0507993775470972"/>
    <parent link="bogie"/>
    <child link="front_right_steer"/>
    <axis xyz="0 0 -1"/>
  </joint>

  <link name="front_right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="3.33066907387547E-16 2.77555756156289E-16 -0.0103428040717612"/>
      <mass value="2.82"/>
      <inertia ixx="0.0224" ixy="0.0" ixz="-0.0006" 
               iyy="0.0224" iyz="0.0" izz="0.0337"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_right_wheel.STL"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <mesh filename="package://description/meshes/front_right_wheel.STL"/>
      </geometry>
    </collision>
  </link>
  
  <joint name="front_right_wheel_joint" type="continuous">
    <origin rpy="1.5707963267949 1.23836412201798 0" xyz="0 0 -0.214560184613926"/>
    <parent link="front_right_steer"/>
    <child link="front_right_wheel"/>
    <axis xyz="0 0 -1"/>
  </joint>
  <link name="rear_right_steer">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.18"/>
      <mass value="3.15"/>
      <inertia ixx="0.0235" ixy="0.0" ixz="0.0034" iyy="0.0311" iyz="0.0" izz="0.0134"/>    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_right_steer.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_right_steer.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="rear_right_steer_joint" type="revolute">
    <limit effort="50" lower="-0.8" upper="0.8" velocity="30"/>
    <origin rpy="0 0 0" xyz="0.4038086578651 -0.313808657865102 -0.01666"/>
    <parent link="chassis"/>
    <child link="rear_right_steer"/>
    <axis xyz="0 0 -1"/>
  </joint>
  <link name="rear_right_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="2.77555756156289E-17 2.22044604925031E-16 -0.0103428040717601"/>
      <mass value="2.82"/>
      <inertia ixx="0.0224" ixy="0.0" ixz="-0.0006" 
              iyy="0.0224" iyz="0.0" izz="0.0337"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_right_wheel.STL"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_right_wheel.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="rear_right_wheel_joint" type="continuous">
    <origin rpy="0.0053380848461707 1.5707963267949 0" xyz="0 0 -0.219"/>
    <parent link="rear_right_steer"/>
    <child link="rear_right_wheel"/>
    <axis xyz="0 0 -1"/>
  </joint>
  <link name="rear_left_steer">
    <inertial>
      <origin rpy="0 0 0" xyz="0.0 0.0 -0.18"/>
      <mass value="3.15"/>
      <inertia ixx="0.0311" ixy="0.0" ixz="0.0" iyy="0.0" iyz="-0.0034" izz="0.0134"/>    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_left_steer.STL"/>
      </geometry>
      <material name="black"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_left_steer.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="rear_left_steer_joint" type="revolute">
    <limit effort="50" lower="-0.8" upper="0.8" velocity="30"/>
    <origin rpy="0 0 -1.56733797587802" xyz="-0.403808657865099 -0.313808657865101 -0.01666"/>
    <parent link="chassis"/>
    <child link="rear_left_steer"/>
    <axis xyz="0 0 -1"/>
  </joint>

  <link name="rear_left_wheel">
    <inertial>
      <origin rpy="0 0 0" xyz="1.66533453693773E-16 -2.77555756156289E-16 -0.0103428040717607"/>
      <mass value="2.82"/>
      <inertia ixx="0.0224" ixy="0.0" ixz="-0.0006" 
              iyy="0.0224" iyz="0.0" izz="0.0337"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_left_wheel.STL"/>
      </geometry>
      <material name="grey"/>
    </visual>
    <collision>
      <origin rpy="0 0 0" xyz="0 0 0.0"/>
      <geometry>
        <mesh filename="package://description/meshes/rear_left_wheel.STL"/>
      </geometry>
    </collision>
  </link>
  <joint name="rear_left_wheel_joint" type="continuous">
    <origin rpy="-1.5707963267949 1.3424366648975 -3.14159265358979" xyz="0 0 -0.219"/>
    <parent link="rear_left_steer"/>
    <child link="rear_left_wheel"/>
    <axis xyz="0 0 1"/>
  </joint>

</xacro:macro>
</robot>
